<div class="armchair">
    <h3>
        <span ng-if="isAdd">Thêm chuyên mục</span>
        <span ng-if="!isAdd">Chỉnh sửa chuyên mục</span>
    </h3>
    <div class="uk-grid">
        <div class="uk-width-1">
            <div id="form_data" class="uk-grid">
                <div class="uk-width-medium-2-3">
                    <div class="md-input-wrapper">
                        <span>Tiêu đề</span> <span class="required-field">(*)</span>
                        <input ng-change="autoConvertAlias()" required ng-model="data.MenuName" type="text" class="md-input">
                    </div>
                    <div class="md-input-wrapper">
                        <span>Alias</span> <span class="required-field">(*)</span>
                        <input required ng-model="data.MenuAlias" type="text" class="md-input">
                    </div>
                    <div class="md-input-wrapper">
                        <span>Thuộc chuyên mục</span> <span class="required-field">(*)</span>
                        <select required ng-model="data.MenuParentId" class="md-input" convert-to-number>
                            <option value="">-- Chọn chuyên mục --</option>
                            <option value="0">Không thuộc chuyên mục nào</option>
                            <option ng-repeat="item in menus" value="{{item.MenuId}}">{{item.MenuName}}</option>
                        </select>
                    </div>
                    <div class="md-input-wrapper">
                        <span>Kiểu hiển thị</span> <span class="required-field">(*)</span>
                        <select required ng-model="data.MenuTypeId" class="md-input" convert-to-number>
                            <option value="">-- Chọn kiểu hiển thị --</option>
                            <option ng-repeat="item in menuTypes" value="{{item.MenuTypeId}}">{{item.MenuTypeName}}</option>
                        </select>
                    </div>
                    <div class="md-input-wrapper">
                        <span>Đường dẫn</span>
                        <input ng-model="data.Link" type="text" class="md-input">
                    </div>
                    <div class="md-input-wrapper">
                        <span>Thứ tự hiển thị</span>
                        <input ng-model="data.Index" type="number" value="0" min="0" class="md-input">
                    </div>
                    <div class="md-input-wrapper">
                        <span>Hiển thị: </span>
                        <input type="checkbox" data-switchery checked id="switch_status" />
                    </div>
                    <div class="md-input-wrapper">
                        <span>Menu Top: </span>
                        <input type="checkbox" data-switchery checked id="switch_menutop" />
                    </div>
                    <div class="md-input-wrapper">
                        <span>Menu Bottom: </span>
                        <input type="checkbox" data-switchery checked id="switch_menubottom" />
                    </div>
                    <div class="md-input-wrapper">
                        <span>Show Home: </span>
                        <input type="checkbox" data-switchery checked id="switch_highlight" />
                    </div>
                    <div class="md-input-wrapper">
                        <span>Yêu thích (May you also like): </span>
                        <input type="checkbox" data-switchery checked id="switch_MayLike" />
                    </div>
                    <div class="md-input-wrapper">
                        <span ng-click="showDetailMenuTab(data.FakeMenuTab[0])" class="fake-btn fake-btn-type1 fake-btn-type1-1">Mô tả chuyên mục</span>
                        <span ng-click="showDetailMenuTab(data.FakeMenuTab[1])" class="fake-btn fake-btn-type1 fake-btn-type1-2">Tổng quan</span>
                        <span ng-click="showDetailMenuTab(data.FakeMenuTab[2])" class="fake-btn fake-btn-type1 fake-btn-type1-3">Ghi chú</span>
                        <span ng-click="showDetailMenuTab(data.FakeMenuTab[3])" class="fake-btn fake-btn-type1 fake-btn-type1-4">Giới thiệu</span>
                        <button ng-click="saveTourTab()" id="btnSaveTourTab" style="display:none" class="md-btn md-btn-primary">Lưu</button>
                        <div class="md-input-wrapper">
                            <textarea class="md-input autosized" rows="2" name="Description"></textarea>
                        </div>
                    </div>
                    <div class="md-input-wrapper">
                        <span>Content</span>
                        <textarea class="md-input autosized" rows="2" name="Content"></textarea>
                    </div>
                </div>
                <div class="uk-width-medium-1-3">
                    <div class="uk-grid">
                        <div class="uk-width-1 uk-text-center">
                            <span>Ảnh nền</span>
                            <img id="img-logo" src="~/FileDefault/img-default.gif">
                            <input value="/FileDefault/img-default.gif" id="Logo" style="display: none; width: 0px;" name="Logo" class="upload">
                        </div>
                        <div class="uk-width-1 uk-text-center">
                            <span style="display:block">Ảnh đại diện (480x480, 683x335)</span>
                            <img id="img-logo2" src="~/FileDefault/img-default.gif">
                            <input value="/FileDefault/img-default.gif" id="Logo2" style="display: none; width: 0px;" name="Logo" class="upload-gallery">
                        </div>
                        <div class="uk-width-1 uk-text-center">
                            <span>Ảnh phụ (270x320, 580x150)</span>
                            <img id="img-logo3" src="~/FileDefault/img-default.gif">
                            <input id="Logo3" style="display: none; width: 0px;" name="Logo3" class="upload3">
                        </div>
                        <div class="uk-width-1 uk-margin-top">
                            <h3 style="margin-bottom: 0;text-decoration: underline;">Tối ưu hóa công cụ tìm kiếm (SEO)</h3>
                            <div class="md-input-wrapper">
                                <span>Tiêu đề trang</span>
                                <input ng-model="data.Title" type="text" class="md-input">
                            </div>
                            <div class="md-input-wrapper">
                                <span>Meta Title</span>
                                <input ng-model="data.MetaTitle" type="text" class="md-input">
                            </div>
                            <div class="md-input-wrapper">
                                <span>Meta Description</span>
                                <textarea ng-model="data.MetaDescription" class="md-input autosized" rows="2"></textarea>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<div class="window-footer uk-text-center">
    <button ng-click="closeWindow()" type="button" class="md-btn md-btn-default md-btn-wave-light waves-effect waves-button waves-light">Hủy</button>
    <button ng-if="isAdd" ng-click="Post()" type="button" class="md-btn md-btn-primary md-btn-wave-light waves-effect waves-button waves-light">Thêm mới</button>
    <button ng-if="!isAdd" ng-click="Put()" type="button" class="md-btn md-btn-primary md-btn-wave-light waves-effect waves-button waves-light">Cập nhật</button>
</div>
<script>
    $(document).ready(function () {
        //CKEDITOR.replace("Description");
        CKEDITOR.replace('Description', {
            on: {
                change: function (evt) {
                    $("#btnSaveTourTab").click();
                }
            }
        });
        CKEDITOR.replace("Content");
        function setFileField(fileUrl) {
            $('#' + $(upload).attr('for')).val(fileUrl);
            $("#img-logo").attr("src", fileUrl);
        }
        function setFileFieldGallery(fileUrl) {
            $('#' + $(uploadGallery).attr('for')).val(fileUrl);
            $("#img-logo2").attr("src", fileUrl);
        }
        function setFileField3(fileUrl) {
            $('#' + $(upload3).attr('for')).val(fileUrl);
            $("#img-logo3").attr("src", fileUrl);
        }

        if (!$('.button-upload').length > 0) {
            var upload;
            var textBox = $('.upload');
            for (var i = 0; i < textBox.length; i++) {
                var uploadText = $(textBox[i]);
                uploadText.css('width', uploadText.width() - 70);
                uploadText.after('<button type="button" for="' + uploadText.attr('id') + '" class="button-upload md-btn md-btn-primary md-btn-wave-light uk-margin-top">Chọn ảnh</button>');
                $('.button-upload').click(function () {
                    upload = $(this);
                    // You can use the "CKFinder" class to render CKFinder in a page:
                    var finder = new CKFinder();
                    finder.basePath = '../files';
                    finder.selectActionFunction = setFileField;
                    finder.popup();
                });
            }
        }

        if (!$('.button-upload3').length > 0) {
            var upload3;
            var textBox3 = $('.upload3');
            for (var i = 0; i < textBox3.length; i++) {
                var uploadText3 = $(textBox3[i]);
                uploadText3.css('width', uploadText3.width() - 70);
                uploadText3.after('<button type="button" for="' + uploadText3.attr('id') + '" class="button-upload3 md-btn md-btn-primary md-btn-wave-light uk-margin-top">Chọn ảnh</button>');
                $('.button-upload3').click(function () {
                    upload3 = $(this);
                    // You can use the "CKFinder" class to render CKFinder in a page:
                    var finder3 = new CKFinder();
                    finder3.basePath = '../files';
                    finder3.selectActionFunction = setFileField3;
                    finder3.popup();
                });
            }
        }

        if (!$('.button-upload-gallery').length > 0) {
            var uploadGallery;
            var textBoxGallery = $('.upload-gallery');
            for (i = 0; i < textBoxGallery.length; i++) {
                var uploadTextGalery = $(textBoxGallery[i]);
                uploadTextGalery.css('width', uploadTextGalery.width() - 70);
                uploadTextGalery.after('<button type="button" for="' + uploadTextGalery.attr('id') + '" class="button-upload-gallery md-btn md-btn-primary md-btn-wave-light uk-margin-top">Chọn ảnh</button>');
                $('.button-upload-gallery').click(function () {
                    uploadGallery = $(this);
                    // You can use the "CKFinder" class to render CKFinder in a page:
                    var finderGallery = new CKFinder();
                    finderGallery.basePath = '../files';
                    finderGallery.selectActionFunction = setFileFieldGallery;
                    finderGallery.popup();
                });
            }
        }
    });
</script>